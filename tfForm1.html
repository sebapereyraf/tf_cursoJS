<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .error {
            color:red 
        }
        .input-vacio {
            background-color: red;
        }

        body {
      font-family: Arial, sans-serif;
      background-color: #f5f5f5;
    }

    form {
      width: 400px;
      margin: 0 auto;
      background-color: #fff;
      padding: 20px;
      border-radius: 5px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    ul {
      list-style: none;
      padding: 0;
    }

    li {
      margin-bottom: 10px;
    }

    label {
      font-weight: bold;
    }

    input[type="text"],
    input[type="email"],
    input[type="password"],
    select {
      width: 100%;
      padding: 5px;
      border: 1px solid #ccc;
      border-radius: 3px;
    }

    input[type="number"] {
      width: 60px;
    }

    button[type="submit"] {
      background-color: #4caf50;
      color: #fff;
      border: none;
      padding: 10px 20px;
      border-radius: 3px;
      cursor: pointer;
      }

    button[class="control"] {
        background-color: #4d48ec;
        color: #fff;
        border: none;
        padding: 10px 20px;
        border-radius: 3px;
        cursor: pointer;
        }

                
    </style>

    <script src="jquery-3.7.0.min.js"></script>
    <script>
        $(document).ready(function() {
            $("#form1").submit(function(event) {
                event.preventDefault(); // Evitar envío del formulario
                
                let formularioValido = true;
                
               let msjError="Es necesario completar este dato"

                if ($("#nombre").val()==="") {
                    $("#nombreError").text(msjError)            //("Es necesario completar este dato");
                    $("#nombreError").show  //.addClass("visible");
                    $("#nombre").addClass("input-vacio");
                    formularioValido = false;
                } else {
                    $("#nombreError").text("");
                    $("#nombreError").hide  //removeClass("visible");
                    $("#nombre").removeClass("input-vacio");
                }

                if ($("#apellido").val()==="") {
                    $("#apellidoError").text(msjError)            //("Es necesario completar este dato");
                    $("#apellidoError").hide  //.addClass("visible");
                    $("#apellido").addClass("input-vacio");
                    formularioValido = false;

                } else {
                    $("#apellidoError").text("");
                    $("#apellidoError").show  //removeClass("visible");
                    $("#apellido").removeClass("input-vacio");
                }

                if ($("#email").val()==="") {
                    $("#emailError").text(msjError)            //("Es necesario completar este dato");
                    $("#emailError").hide  //.addClass("visible");
                    $("#email").addClass("input-vacio");
                    formularioValido = false;

                } else {
                    $("#emailError").text("");
                    $("#emailError").show  //removeClass("visible");
                    $("#email").removeClass("input-vacio");
                }

                if ($("#usuario").val()==="") {
                    $("#usuarioError").text(msjError)            //("Es necesario completar este dato");
                    $("#usuarioError").hide  //.addClass("visible");
                    $("#usuario").addClass("input-vacio");
                    formularioValido = false;

                } else {
                    $("#usuarioError").text("");
                    $("#usuarioError").show  //removeClass("visible");
                    $("#usuario").removeClass("input-vacio");
                }

                if ($("#password").val()==="") {
                    $("#passwordError").text(msjError)            //("Es necesario completar este dato");
                    $("#passwordError").hide  //.addClass("visible");
                    $("#password").addClass("input-vacio");
                    formularioValido = false;

                } else {
                    $("#passwordError").text("");
                    $("#passwordError").show  //removeClass("visible");
                    $("#password").removeClass("input-vacio");
                }

                if ($("#password2").val()==="") {
                    $("#password2Error").text(msjError)            //("Es necesario completar este dato");
                    $("#password2Error").hide  //.addClass("visible");
                    $("#password2").addClass("input-vacio");
                    formularioValido = false;

                } else {
                    $("#password2Error").text("");
                    $("#password2Error").show  //removeClass("visible");
                    $("#password2").removeClass("input-vacio");
                }
             
                let expresionEmail = /^\S+@\S+\.\S+$/;
                if (!expresionEmail.test($("#email").val())) {
                    $("#emailError2").text("Se requiere un email válido");
                    $("#emailError2").show();
                    $("#email").addClass("input-vacio");
                    formularioValido = false;
                } else {
                    $("#emailError2").text("");
                    $("#emailError2").hide();
                    $("#email").removeClass("input-vacio");
                }

                if ($("#password").val() !== $("#password2").val()) {
                    $("#password2Error2").text("Las contraseñas no coinciden");
                    $("#password2Error2").show();
                    $("#password2").addClass("input-vacio");
                    formularioValido = false;
                } else {
                    $("#password2Error2").text("");
                    $("#password2Error2").hide();
                    $("#password2").removeClass("input-vacio");
                }

                if (formularioValido) {
                const dataUsuario ={
                    nombre: $("#nombre").val(),
                    apellido: $("#apellido").val(),
                    usuario: $("#usuario").val(),
                } 
                localStorage.setItem("dataUsuario", JSON.stringify(dataUsuario));
                const dataUsuarioGuardado=JSON.parse(localStorage.getItem("dataUsuario"));
                console.log(dataUsuarioGuardado.usuario); 

                $(location).attr('href', './tf_inicio.html'); // que se redireccione a la pagina inicial
                }
                
            });

            $.ajax({
                url: "https://apis.datos.gob.ar/georef/api/provincias",
                method: "GET",
                datatype: "json",
                success: function(data){
                    $("#provinciaError").hide();

                    for (var i=0; i<data.provincias.length; i++){
                        let nombreProvincia=data.provincias[i].nombre;
                        let valorProvincia=data.provincias[i].id;
                        let opcionSelect=$("<option>").text(nombreProvincia).val(valorProvincia);
                        $("#provincia").append(opcionSelect);
                        
                    }

                },
                error: function(){
                    $("#provinciaError").text("Error al mostra provincias. Intentelo mas tarde");
                    $("#provinciaError").show();

                }
            })

            $.ajax({
                url: "https://restcountries.com/v3.1/all",
                method: "GET",
                datatype: "json",
                success: function(data){
                    $("#paisesError").hide();

                    for (var i=0; i<data.length; i++){
                        let nombrePais=data[i].name.common;
                        let opcionSelect=$("<option>").text(nombrePais).val(nombrePais);
                        $("#paises").append(opcionSelect);
                    }

                },
                error: function(){
                    $("#paisesError").text("Error al mostrar paises. Intentelo mas tarde");
                    $("#paisesError").show();

                }
            })
            $('#paginaInicio').click(function(){
                $(location).attr('href', './tf_inicio.html');
            });
        });
        
        
        /*
        
        $(document).ready(function(){
        $("#form1").submit(function(event){
            event.preventDefault(); // Evita que el formulario se envie

            if ($("#nombre").val()===""){
            $("#nombreError").textContent=$("#nombre").label + " es obligatorio"
            $("#nombreError").classList.add("visible")
        } else{
            $("#nombreError").textContent= ""
            $("#nombreError").classList.remove("visible")
        }
                    
        });
        }); 

        */

        


    </script>



</head>
<body>
    <form id="form1">
        <ul>
            <li>
                <label for="nombre">Nombre:</label>
                <input type="text" id="nombre" name="nombre" value=""> </input>
            </li>
            <span class="error" id="nombreError"></span>
            <br><br>
            <li>
                <label for="apellido">Apellido:</label>
                <input type="text" id="apellido" name="apellido" value=""> </input>
            </li>
            <span class="error" id="apellidoError"></span>            
            <br><br>
            <li>
                <label for="edad">Edad:</label>
                <input type="number" id="edad" name="edad" value="" min="0" max="120" step="1"> </input>
            </li>
            <span class="error" id="edadError"></span>            
            <br><br>
            <li>
                <label for="email">Correo Electronico:</label>
                <input type="email" id="email" name="email" value=""> </input>
            </li>
            <span class="error" id="emailError"></span>
            <br>
            <span class="error" id="emailError2"></span>            
            <br><br>
            <li>
                <label for="ciudad">Ciudad:</label>
                <input type="text" id="ciudad" name="ciudad" value=""> </input>
            </li>
            <br><br>
            <li>
                <label for="provincia">Provincia:</label>
                <select id="provincia"> 
                    <option value="">Seleccione una Provincia</option>
                </select>
            </li>
            <span class="error" id="provinciaError"></span>
            <br><br>
            <li>
                <label for="paises">Pais:</label>
                <select id="paises"> 
                    <option value="">Seleccione un Pais</option>
                </select>
            </li>
            <span class="error" id="paisesError"></span>
            <br><br>
            <li>
                <label for="usuario">Nombre de usuario:</label>
                <input type="text" id="usuario" name="usuario" value=""> </input>
            </li>
            <span class="error" id="usuarioError"></span>            
            <br><br>
            <li>
                <label for="password">Contraseña:</label>
                <input type="password" id="password" name="password" value=""> </input>
            </li>
            <span class="error" id="passwordError"></span>            
            <br><br>
            <li>
                <label for="password2">Repetir contraseña:</label>
                <input type="password" id="password2" name="password2" value=""> </input>
            </li>
            <span class="error" id="password2Error"></span> 
            <br> 
            <span class="error" id="password2Error2"></span>            
            <br> 
            <br>
            <class="button">
                <button type="submit">Envíe formulario</button>
        </ul>
        <button id="paginaInicio" class="control">Volver a pagina Principal</button>
        
      
    </form>


</body>
</html>

<!-- <input type="submit" id="boton" name="boton" value="ENVIAR">